<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zrooms Admin - Meeting Details</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>
    <nav class="admin-nav">
        <div class="container">
            <h1>Zrooms Admin</h1>
            <div class="nav-links">
                <a href="/admin">Dashboard</a>
                <a href="/admin/meetings">All Meetings</a>
                <a href="/">Public View</a>
            </div>
        </div>
    </nav>
    
    <main class="container">
        <div class="breadcrumb">
            <a href="/admin">Dashboard</a> → 
            <a href="/admin/meetings">All Meetings</a> → 
            Meeting Details
        </div>

        <div class="meeting-detail">
            <div class="meeting-header">
                <h1>{{.Meeting.Topic}}</h1>
                <span class="meeting-id">{{.Meeting.ID}}</span>
            </div>
            
            <div class="meeting-content">
                <div class="details-grid">
                    <div class="detail-section">
                        <h3>Meeting Information</h3>
                        <div class="detail-row">
                            <span class="detail-label">Topic:</span>
                            <span class="detail-value">{{.Meeting.Topic}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Meeting ID:</span>
                            <span class="detail-value"><code>{{.Meeting.ID}}</code></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Status:</span>
                            <span class="detail-value {{statusClass .Meeting.Status}}">{{statusText .Meeting.Status}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Host:</span>
                            <span class="detail-value">{{if .Meeting.HostID}}{{.Meeting.Host}}{{else}}-{{end}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Created/Managed by:</span>
                            <span class="detail-value">{{if .Meeting.OperatorEmail}}{{.Meeting.OperatorEmail}}{{else}}-{{end}}</span>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>Timing Information</h3>
                        <div class="detail-row">
                            <span class="detail-label">Start Time:</span>
                            <span class="detail-value">{{formatDateTime .Meeting.StartTime}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">End Time:</span>
                            <span class="detail-value">{{formatDateTime .Meeting.EndTime}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Duration:</span>
                            <span class="detail-value">
                                {{if and (not .Meeting.StartTime.IsZero) (not .Meeting.EndTime.IsZero)}}
                                    {{printf "%.0f minutes" (.Meeting.EndTime.Sub .Meeting.StartTime).Minutes}}
                                {{else if and (not .Meeting.StartTime.IsZero) (eq .Meeting.Status 1)}}
                                    {{printf "%.0f minutes (ongoing)" (now.Sub .Meeting.StartTime).Minutes}}
                                {{else}}
                                    -
                                {{end}}
                            </span>
                        </div>
                    </div>
                </div>

                {{if eq .Meeting.Status 1}}
                <div class="detail-section">
                    <h3>Current Participants</h3>
                    <div class="participant-badge">{{.ParticipantCount}} participants</div>
                    <p class="privacy-note">
                        Participant details are not stored for privacy reasons. Only the count is tracked.
                    </p>
                </div>
                {{end}}

                <div class="actions">
                    <a href="/admin/meetings" class="btn btn-secondary">← Back to All Meetings</a>
                    <a href="/admin/meetings/raw/{{.Meeting.ID}}" class="btn btn-info" target="_blank">View Raw Zoom Data</a>
                    <form method="POST" action="/admin/meetings/delete/{{.Meeting.ID}}" style="display: inline;" 
                          onsubmit="return confirm('Are you sure you want to delete this meeting? This action cannot be undone.')">
                        <button type="submit" class="btn btn-danger">Delete Meeting</button>
                    </form>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <p>&copy; {{.CurrentYear}} Zrooms Admin - Last updated: {{.LastUpdated}}</p>
        </div>
    </footer>
</body>
</html>
